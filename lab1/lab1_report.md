University: [ITMO University](https://itmo.ru/ru/)

Faculty: [FICT](https://fict.itmo.ru)

Course: [Network programming](https://github.com/itmo-ict-faculty/network-programming)

Year: 2022/2023

Group: K34202

Author: Molchanova Veronika Alexandrovna

Lab: Lab1

Date of create: 16.10.2022

Date of finished: xx.xx.2022

Ход работы:
1.	Создана виртуальная машина в Яндекс.Облаке на операционной системе Ubuntu.
2.	Выполнено подключение к ВМ по ssh.
3.	Установлен ansible. 
4.	Выполнена проверка установки ansible.
5.	В VirtualBox установлен MikroTik 7 версии, это будет важно для дальнейшей работы. Здесь имеет смысл обратить внимание на то, что после загрузки в настройках VirtualBox необходимо отключить загрузочный диск вручную, тогда как на установке более привычных операционных систем это происходит автоматически.
6.	После этого устанавливаем Wireguard на удалённую машину. 
7.	Прописываем в Wireguard в файл условий интерфейса. Создаём пару ключей.
8.	После этого начинаем работу с MikroTik. Было обнаружено, что большая часть инструкций по его использованию объясняют работу при помощи графического интерфейса WinBox. 
9.	С помощью Winbox получилось подключиться к виртуальной машине MikroTik.
10.	Поскольку в качестве VPN был выбран WireGuard, и установлен MikroTik последней версии, заходим в настройку Wireguard и создаём там новый интерфейс
11.	Заполняем конфиг файл wg0.conf.
12.	Создан интерфейс.  
13.	Создана пара ключей для интерфейса
14.	Узнали ListenPort через команду открытия файла /etc/wireguard/wg0.conf , 
чтобы создать интерфейс 
15.	Переходим во вторую вкладку, там создаём Peer - указываем только что созданный интерфейс, указываем публичный ключ сервера, его публичный IP, указанный ранее порт и сеть адресов, по которым будет идти подключение.  
16.	В настройке IP - Addresses указываем выбранную сеть и созданный интерфейс.
17.	В настройке IP - Firewall создаём NAT Rule masquerade, Masquerade NAT позволяет преобразовывать несколько IP-адресов в другой одиночный IP-адрес. Можно использовать маскарадный NAT, чтобы скрыть один или несколько IP-адресов во внутренней сети за IP-адресом, который нужно сделать общедоступным.
18.	Теперь для проверки работоспособности запускаем ping к виртуальной машине по заданному IP адресу. Пинг идёт - следовательно, все настройки выполнены корректно
19.	В результате получаем связь по следующей схеме.
Выводы: При помощи WireGuard возможно настроить VPN туннель между виртуальной машиной с операционной системой RouterOS и удалённой виртуальной машиной. Для работы с RouterOS достаточно удобно использовать графический интерфейс.
